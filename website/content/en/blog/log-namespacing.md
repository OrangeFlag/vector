---
title: Log Namespacing. Changing Vector's data model.
short: Log Namespacing
description: Improving reliability and performance across your entire observability infrastructure
authors: ["fuchsnj"]
date: "2023-??-??"
badges:
  type: announcement
  domains: ["data model"]
tags: []
---

The Vector team has been hard at work improving the data model of events in Vector. These
changes are now available for beta testing for those who want to try it out and give feedback.
This is an opt-in feature. Nothing should change unless you specifically enable it.

## Why

Currently, all data for events is placed at the root of the event, regardless of where the data came
from or how it was obtained. Not only can that make it confusing to understand what a certain field
represents (eg: was the `timestamp` field generated by vector when it was ingested, or is it when
the source originally created the event) but it can easily cause data collisions.

We have also been working on adding internal type definitions to allow end to end type checking of
data in Vector. While this is not yet fully supported, Log Namespacing removes all the
possible data collisions that made calculating the types difficult.


## How to enable

The global Vector configuration `schema.log_namespace` can be set to `true` to enable the new
Log Namespacing feature for all components. The default is `false`.

Every source also has a `log_namespace` config option. This will override the global setting,
so you can try out Log Namespacing on individual sources.

The following example enables the `log_namespace` feature globally, then disables it for a single
source.

```toml
schema.log_namespace = true

[sources.input_with_log_namespace]
type = "demo_logs"
format = "shuffle"
lines = ["input_with_log_namespace"]
interval = 1

[sources.input_without_log_namespace]
type = "demo_logs"
format = "shuffle"
lines = ["input_without_log_namespace"]
interval = 1
log_namespace = false

[sinks.console]
type = "console"
inputs = ["input_with_log_namespace", "input_without_log_namespace"]
encoding.codec = "json"

```

## Features


### Data Layout

There are three distinct types of data that Vector handles.

(Examples are from the `http_client` source)
- Event Data: The decoded event data. (eg: the decoded HTTP body)
- Source Metadata: Metadata provided by the source of the event. (eg: the HTTP headers)
- Vector Metadata: Metadata provided by Vector. (eg: the time when Vector received the event)

#### Without Log Namespacing
All three of these are placed at the root of the event. The exact layout depends on the source,
some fields are configurable, and the [global log schema] can change the name / location of some
fields.

Example event from the `datadog agent logs` source (with JSON decoder)

```json
{
  "ddsource": "keaton",
  "ddtags": "env:prod",
  "hostname": "alpha",
  "foo": "foo field",
  "service": "cernan",
  "source_type": "datadog_agent",
  "bar": "bar field",
  "status": "warning",
  "timestamp": "1970-02-14T20:44:57.570Z"
}
```

#### With Log Namespacing
When enabled, the layout of this data is well-defined and consistent.

Event Data (and _only_ Event Data) is placed at the root of the event (eg: `.`).
Source metadata is placed in event metadata, prefixed by the source name. (eg: `%datadog_agent`)
Vector metadata is placed in event metadata, prefixed by `vector`. (eg: `%vector`)

Example event from the `datadog agent logs` source. (same data as the example above)

Event root (`.`)
```json
{
  "foo": "foo field",
  "bar": "bar field"
}
```

Source metadata fields (`%datadog_agent`)

```json
{
    "ddsource": "keaton",
    "ddtags": "env:prod",
    "hostname": "alpha",
    "service": "cernan",
    "status": "warning",
    "timestamp": "1970-02-14T20:44:57.570Z"
  }
```

Source vector fields (`%vector`)
```json
{
"source_type": "datadog_agent",
"ingest_timestamp": "1970-02-14T20:44:58.236Z"
}
```

### Global Log Schema

The global log schema will no longer be used when Log Namespacing is enabled.




[global log schema]: /docs/reference/configuration/global-options/#log_schema
